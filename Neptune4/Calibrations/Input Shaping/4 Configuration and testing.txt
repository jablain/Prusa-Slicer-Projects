4. Configuration and testing

Tip

The installation method of accelerometer dependent package is as follows:

Tip

It is recommended to use SSH tools such as MobaXterm_Personal to operate

Tip

This step is for 非FLY上位机, if you are a Fly-πor Geminiseries, you don’t need to perform it! ! !

Execute the following three commands in sequence to install the accelerometer dependency package.

sudo apt update

sudo apt install python3-numpy python3-matplotlib libatlas-base-dev

~/klippy-env/bin/pip install matplotlib numpy

Please note that depending on the performance of the CPU it may take a lot of time, up to 10-20 minutes. Please wait patiently for the installation to complete. In some cases, the installation may fail if the motherboard has too little RAM.

    Open printer.cfg and add accelerometer configuration

[mcu adxl]
serial: /dev/serial/by-id/usb-Klipper_rp2040_XXXXXXXXXXXXXXXXXXXXX
### 查询usb固件id是：ls -l /dev/serial/by-id/
### 把/dev/serial/by-id/usb-Klipper_rp2040_XXXXXXXXXXXXXXXXXXXXX替换查询到的id

##ADXL345加速度计
[adxl345]
cs_pin: adxl:gpio9
spi_software_sclk_pin: adxl:gpio10
spi_software_mosi_pin: adxl:gpio11
spi_software_miso_pin: adxl:gpio12

[resonance_tester]
accel_chip: adxl345
probe_points:
    100, 100, 20  # 此坐标为你需要测量的位置，一般为热床中间

    Save and restart after modifying the configuration
    Execute on consoleACCELEROMETER_QUERY
    Multiple accelerometers can be specified to test a certainACCELEROMETER_QUERY CHIP=bed
    If an error occurs, please check the wiring and configuration.
    The normal output is as shown below
